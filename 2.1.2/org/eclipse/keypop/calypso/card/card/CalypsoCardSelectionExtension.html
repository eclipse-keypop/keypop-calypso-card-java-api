<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>CalypsoCardSelectionExtension (Keypop Calypso Card API - 2.1.2)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.eclipse.keypop.calypso.card.card, interface: CalypsoCardSelectionExtension">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 7px"><span></span> Keypop Calypso Card API - 2.1.2</div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/CalypsoCardSelectionExtension.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.eclipse.keypop.calypso.card.card</a></div>
<h1 title="Interface CalypsoCardSelectionExtension" class="title">Interface CalypsoCardSelectionExtension</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code>org.eclipse.keypop.reader.selection.spi.CardSelectionExtension</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">CalypsoCardSelectionExtension</span><span class="extends-implements">
extends org.eclipse.keypop.reader.selection.spi.CardSelectionExtension</span></div>
<div class="block">Extends the <code>CardSelectionExtension</code> interface of the "Keypop Reader API" to provide means
 to define optional commands to be executed during the selection phase.

 <p>An instance of this interface can be obtained via the method <a href="../CalypsoCardApiFactory.html#createCalypsoCardSelectionExtension()"><code>CalypsoCardApiFactory.createCalypsoCardSelectionExtension()</code></a>.

 <p>Note 1: by default, the selection process ignores PRIME revision 3 cards that have been
 invalidated. The <a href="#acceptInvalidatedCard()"><code>acceptInvalidatedCard()</code></a> method must be
 called to stop ignoring them.<br>
 This feature does not apply to earlier revisions for which it is necessary to run a Select File
 (DF) command to determine the invalidation status. In this case, the rejection or acceptance of
 invalidated cards will have to be handled by the application.

 <p>Note 2: the APDU commands resulting from the invocation of the "prepare" methods shall be
 compliant with the PRIME revision 3 cards.

 <p>For all "prepare" type commands, unless otherwise specified, here are the ranges of values
 checked for the various parameters:

 <ul>
   <li>SFI: [0..30] (0 indicates the current EF)
   <li>Record number: [1..250]
   <li>Counter number: [1..83]
   <li>Counter value: [0..16777215]
   <li>Offset: [0..249] or [0..32767] for binary files (0 indicates the first byte)
   <li>Input data length: [1..250] or [1..32767] for binary files
 </ul></div>
<dl class="notes">
<dt>Since:</dt>
<dd>2.0.0</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#acceptInvalidatedCard()" class="member-name-link">acceptInvalidatedCard</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Request to accept invalidated cards during the selection stage.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareGetData(org.eclipse.keypop.calypso.card.GetDataTag)" class="member-name-link">prepareGetData</a><wbr>(<a href="../GetDataTag.html" title="enum class in org.eclipse.keypop.calypso.card">GetDataTag</a>&nbsp;tag)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Adds a "Get Data" command to retrieve the data indicated by the provided tag.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#preparePreOpenSecureSession(org.eclipse.keypop.calypso.card.WriteAccessLevel)" class="member-name-link">preparePreOpenSecureSession</a><wbr>(<a href="../WriteAccessLevel.html" title="enum class in org.eclipse.keypop.calypso.card">WriteAccessLevel</a>&nbsp;writeAccessLevel)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Adds a specific "Open Secure Session" command to attempt a secure session pre-opening.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareReadBinary(byte,int,int)" class="member-name-link">prepareReadBinary</a><wbr>(byte&nbsp;sfi,
 int&nbsp;offset,
 int&nbsp;nbBytesToRead)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Adds one or multiple "Read Binary" commands to read all or part of the indicated "binary" EF.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareReadCounter(byte,int)" class="member-name-link">prepareReadCounter</a><wbr>(byte&nbsp;sfi,
 int&nbsp;nbCountersToRead)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Adds a "Read Records" command to read a part of a record of the indicated EF, which should be a
 counter file.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareReadRecord(byte,int)" class="member-name-link">prepareReadRecord</a><wbr>(byte&nbsp;sfi,
 int&nbsp;recordNumber)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Adds a "Read Records" command to read a single record from the indicated "linear" or "cyclic"
 EF.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareSelectFile(short)" class="member-name-link">prepareSelectFile</a><wbr>(short&nbsp;lid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Adds a "Select File" command to select an EF by its LID in the current DF.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepareSelectFile(org.eclipse.keypop.calypso.card.SelectFileControl)" class="member-name-link">prepareSelectFile</a><wbr>(<a href="../SelectFileControl.html" title="enum class in org.eclipse.keypop.calypso.card">SelectFileControl</a>&nbsp;selectControl)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Adds a "Select File" command to select file according to the provided <a href="../SelectFileControl.html" title="enum class in org.eclipse.keypop.calypso.card"><code>SelectFileControl</code></a>
 enum entry indicating the navigation case: FIRST, NEXT or CURRENT.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="acceptInvalidatedCard()">
<h3>acceptInvalidatedCard</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">acceptInvalidatedCard</span>()</div>
<div class="block">Request to accept invalidated cards during the selection stage.

 <p>Caution: this functionality is operational only from PRIME revision 3 cards. Invalidated
 cards are rejected by default.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareSelectFile(short)">
<h3>prepareSelectFile</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">prepareSelectFile</span><wbr><span class="parameters">(short&nbsp;lid)</span></div>
<div class="block">Adds a "Select File" command to select an EF by its LID in the current DF.

 <p>Caution 1: the resulting APDU command must be compliant with PRIME revision 3 cards.
 Therefore, the command may be rejected by some earlier revision cards.

 <p>Caution 2: the command will fail if the selected file is not an EF.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lid</code> - The LID of the EF to select.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareSelectFile(org.eclipse.keypop.calypso.card.SelectFileControl)">
<h3>prepareSelectFile</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">prepareSelectFile</span><wbr><span class="parameters">(<a href="../SelectFileControl.html" title="enum class in org.eclipse.keypop.calypso.card">SelectFileControl</a>&nbsp;selectControl)</span></div>
<div class="block">Adds a "Select File" command to select file according to the provided <a href="../SelectFileControl.html" title="enum class in org.eclipse.keypop.calypso.card"><code>SelectFileControl</code></a>
 enum entry indicating the navigation case: FIRST, NEXT or CURRENT.

 <p>Caution: the resulting APDU command must be compliant with PRIME revision 3 cards.
 Therefore, the command may be rejected by some earlier revision cards.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>selectControl</code> - A <a href="../SelectFileControl.html" title="enum class in org.eclipse.keypop.calypso.card"><code>SelectFileControl</code></a> enum entry.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If the argument is null.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareGetData(org.eclipse.keypop.calypso.card.GetDataTag)">
<h3>prepareGetData</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">prepareGetData</span><wbr><span class="parameters">(<a href="../GetDataTag.html" title="enum class in org.eclipse.keypop.calypso.card">GetDataTag</a>&nbsp;tag)</span></div>
<div class="block">Adds a "Get Data" command to retrieve the data indicated by the provided tag.

 <p>This method can be used to obtain FCI information when it is not provided directly by the
 select application (e.g. OMAPI case).

 <p>Caution: the resulting APDU command must be compliant with PRIME revision 3 cards.
 Therefore, the command may be rejected by some earlier revision cards.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tag</code> - The tag to use.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If tag is null.</dd>
<dt>Since:</dt>
<dd>1.0.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareReadRecord(byte,int)">
<h3>prepareReadRecord</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">prepareReadRecord</span><wbr><span class="parameters">(byte&nbsp;sfi,
 int&nbsp;recordNumber)</span></div>
<div class="block">Adds a "Read Records" command to read a single record from the indicated "linear" or "cyclic"
 EF.

 <p>Once this command is processed, the result is available in <a href="CalypsoCard.html" title="interface in org.eclipse.keypop.calypso.card.card"><code>CalypsoCard</code></a> if the
 requested file and record exist in the file structure of the card (best-effort mode).

 <p>Caution: the resulting APDU command is compliant with PRIME revision 3 cards. Therefore, the
 command may be rejected by some earlier revision cards.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sfi</code> - The SFI of the EF to read</dd>
<dd><code>recordNumber</code> - The record number to read.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If one of the provided argument is out of range.</dd>
<dt>Since:</dt>
<dd>1.1.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareReadBinary(byte,int,int)">
<h3>prepareReadBinary</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">prepareReadBinary</span><wbr><span class="parameters">(byte&nbsp;sfi,
 int&nbsp;offset,
 int&nbsp;nbBytesToRead)</span></div>
<div class="block">Adds one or multiple "Read Binary" commands to read all or part of the indicated "binary" EF.

 <p>Once this command is processed, the result is available in <a href="CalypsoCard.html" title="interface in org.eclipse.keypop.calypso.card.card"><code>CalypsoCard</code></a> if the
 requested file exist in the file structure of the card and if the offset and number of bytes to
 read are valid (best-effort mode).

 <p>Caution: the resulting APDU command is compliant with PRIME revision 3 cards. Therefore, the
 command may be rejected by some earlier revision cards.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sfi</code> - The SFI of the EF.</dd>
<dd><code>offset</code> - The offset (0 indicates the first byte).</dd>
<dd><code>nbBytesToRead</code> - The number of bytes to read.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If one of the provided argument is out of range.</dd>
<dt>Since:</dt>
<dd>1.7.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareReadCounter(byte,int)">
<h3>prepareReadCounter</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">prepareReadCounter</span><wbr><span class="parameters">(byte&nbsp;sfi,
 int&nbsp;nbCountersToRead)</span></div>
<div class="block">Adds a "Read Records" command to read a part of a record of the indicated EF, which should be a
 counter file.

 <p>The record will be read up to the counter location indicated in parameter.<br>
 Thus, all previous counters will also be read.

 <p>Once this command is processed, the result is available in <a href="CalypsoCard.html" title="interface in org.eclipse.keypop.calypso.card.card"><code>CalypsoCard</code></a> if the
 requested file and the counter number exist in the file structure of the card (best-effort
 mode).

 <p>Caution: the resulting APDU command is compliant with PRIME revision 3 cards. Therefore, the
 command may be rejected by some earlier revision cards.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sfi</code> - The SFI of the EF.</dd>
<dd><code>nbCountersToRead</code> - The number of counters to read.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If one of the provided argument is out of range.</dd>
<dt>Since:</dt>
<dd>1.7.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="preparePreOpenSecureSession(org.eclipse.keypop.calypso.card.WriteAccessLevel)">
<h3>preparePreOpenSecureSession</h3>
<div class="member-signature"><span class="return-type"><a href="CalypsoCardSelectionExtension.html" title="interface in org.eclipse.keypop.calypso.card.card">CalypsoCardSelectionExtension</a></span>&nbsp;<span class="element-name">preparePreOpenSecureSession</span><wbr><span class="parameters">(<a href="../WriteAccessLevel.html" title="enum class in org.eclipse.keypop.calypso.card">WriteAccessLevel</a>&nbsp;writeAccessLevel)</span></div>
<div class="block">Adds a specific "Open Secure Session" command to attempt a secure session pre-opening. For
 cards that support this feature, this optimizes future exchanges with the card in the case of
 secure sessions intended to be executed in a single step.

 <p>The objective of the pre-opening is to allow the grouping of all the commands of a secure
 session. This functionality is only relevant in the case of a distributed system where the
 ticketing processing is done remotely in order to allow a complete secure session to be carried
 out in a single exchange between the server and the terminal.

 <p>This mechanism is based on the anticipation of the APDU responses of the card.

 <p>In order to achieve the objective of a single exchange, it is essential to read locally
 beforehand (out of session) all the data that will have to be read in session. If not,
 additional exchanges will be made.

 <p>Then, the remote ticketing processing must prepare all the commands of the session (from
 opening to closing) before executing it.

 <p>Example:

 <pre><code>
 transaction
   .prepareOpenSecureSession(...)
   .prepare...
   [...]
   .prepare...
   .prepareCloseSecureSession()
   .processCommands(...);
 </code></pre>

 Caution: this feature will be ineffective in the following cases:

 <ul>
   <li>the card or the cryptographic module does not support the extended mode
   <li>the session contains commands that necessarily require exchanges with the card during the
       session (e.g. PIN, Stored Value, encryption, early mutual authentication, data not
       previously read outside the session)
   <li>the session is opened with an access level different from the pre-opening one
   <li>an intermediate "processCommand(...)" call has been made
   <li>the session uses asymmetric cryptography
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>writeAccessLevel</code> - The write access level.</dd>
<dt>Returns:</dt>
<dd>The current instance.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - If writeAccessLevel is null.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - If "Pre-Open" command is already prepared.</dd>
<dt>Since:</dt>
<dd>1.7.0</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &copy; Eclipse Foundation, Inc. All Rights Reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
